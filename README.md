# Employee Location Portal

## Purpose

### Main Goal

Be an effective and easy-to-use tool by which employees may track whether they are in the office or remote on any given day to enhance employee safety in the case of an office emergency.

### Sub-Goals

* Provide an application endpoint for employees to see and modify their own status.
* Provide an application endpoint for public display and change of status for multiple employees at once.
* Provide a mode for rapid and collaborative accounting of employees in case of an emergency.
* Provide realtime data changes to all connected endpoint using subscriptions.
* Provide API endpoints for a company to implement based on reliable internal company processes that indicate an employee's location.

## Development Information

### Required Tools

* [Visual Studio Code](https://code.visualstudio.com/) as an IDE.
* Linux or WSL shell.
* NPM (ideally installed via NVM).
* Docker Desktop.
* Supabase CLI.

### Running the Project

#### Starting the Project

1) Open the project files in Visual Studio Code.
2) Open Docker Desktop, then run `supabase start` in a Linux shell to start the server side component. This may take a while to run the first time as the Supabase Docker images must be retrieved and started. Note the `API URL` and `anon key` values displayed in the console.
3) Create a `.env.local` file in the root of the project directory. Using the `API URL` and `anon key` generated by Supabase in the previous step, add the following to the file:
    ```
    VITE_SUPABASE_API_URL=<Supabase API URL>
    VITE_SUPABASE_ANON_KEY=<Supabase anon key>
    ```
    These environment variables will be exposed by Vite to the client side code, which is needed for the `supabasejs` library to connect to the supabase instance.
4) If it is your first time running the project, run `npm install` in a Linux shell. If you've done this before, skip this step.
5) Run `npm run dev` in a Linux shell to launch Vite. Then, click the link generated in the terminal to open the website.

#### Making Database Changes

If any database changes in supabase are made during development the following steps should also be taken to track the database changes made alongside the application code. 

1) Run `supabase db diff -f <name_of_change>` to generate a migration file to be committed alongside the code. 
2) Run `supabase db reset` to reset and rebuild the database to verify that the migration works and does not generate errors. Be warned that this will reset any data added manually to the database! If you wish to preserve this data, add it via the seed file.

#### Stopping the Project

1) Terminate Vite by escaping process in Linux shell.
2) If any database changes were made in Supabase make sure to [make database changes](#making-database-changes) before proceeding.
3) Terminate supabase by running `supabase stop`.

### Project Setup and Configuration

Project setup and configuration has been completed via the following steps:

1) Running `npm create vite@latest employee-location-portal -- --template react`.
2) Running `npm install` to install all packages used by Vite.
3) Running `npm install react-router-dom`
4) Running `npm install @vitejs/plugin-react-swc --save-dev` to add more performant render for hot reload functionality.
5) Running `npm install @mui/material @emotion/react @emotion/styled @mui/x-data-grid @fontsource/roboto` to add MUI components.
6) Running `supabase init` to create the server side component.
7) Running `npm install @supabase/supabase-js` to add the client side Supabase library.

# Generated by Vite

## React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react/README.md) uses [Babel](https://babeljs.io/) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh
