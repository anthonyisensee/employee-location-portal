# Employee Location Portal

## Purpose

### Main Goal

Be an effective and easy-to-use tool by which employees may track whether they are in the office or remote on any given day to enhance employee safety in the case of an office emergency.

### Sub-Goals

* Provide an application endpoint for employees to see and modify their own status.
* Provide an application endpoint for public display and change of status for multiple employees at once.
* Provide a mode for rapid and collaborative accounting of employees in case of an emergency.
* Provide realtime data changes to all connected endpoint using subscriptions.
* Provide API endpoints for a company to implement based on reliable internal company processes that indicate an employee's location.

## Development Information

### Required Tools

* [Visual Studio Code](https://code.visualstudio.com/) as an IDE.
* Linux or WSL shell.
* NPM (ideally installed via NVM).
* Docker Desktop.
* Supabase CLI.

### Running the Project

#### Starting the Project

1) Open the project files in Visual Studio Code.
2) Open Docker Desktop, then run `supabase start` in a Linux shell to start the server side component. This may take a while to run the first time as the Supabase Docker images must be retrieved and started.
3) If it is your first time running the project, run `npm install` in a Linux shell. otherwise, skip this step.
4) Run `npm run dev` in a Linux shell to launch Vite. Then, click the link generated in the terminal to open the website.

#### Making Database Changes

If any database changes in supabase are made during development the following steps should also be taken to track the database changes made alongside the application code. 

1) Run `supabase db diff -f <name_of_change>` to generate a migration file to be committed alongside the code. 
2) Run `supabase db reset` to verify that the migration works and does not generate errors. Be warned that this will reset any data added manually to the database! If you wish to preserve this data, add it via the seeding file.
3) Run `supabase gen types --local --schema public > src/types/database.types.ts` to update types associated with the database tables. Make sure this does not introduce any errors to the application!

#### Stopping the Project

1) Terminate Vite by escaping process in Linux shell.
2) If any database changes were made in Supabase make sure to [make database changes](#making-database-changes) before proceeding.
3) Terminate supabase by running `supabase stop`.

### Project Setup

Initial setup for this project was completed via the following steps:

1) Running `npm create vite@latest employee-location-portal -- --template react-ts`.
2) Followed Vite generated instructions for configuring stronger linting rules. Running `npm install eslint-plugin-react --save-dev` and adding recommended configuration changes to `eslint.config.js`.
3) Running `supabase init` to create the server side component.
4) Running `npm install @vitejs/plugin-react-swc --save-dev` to add more performant render for hot reload functionality.

## README Generated by Vite

### React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react/README.md) uses [Babel](https://babeljs.io/) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

#### Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type aware lint rules:

- Configure the top-level `parserOptions` property like this:

```js
export default tseslint.config({
  languageOptions: {
    // other options...
    parserOptions: {
      project: ['./tsconfig.node.json', './tsconfig.app.json'],
      tsconfigRootDir: import.meta.dirname,
    },
  },
})
```

- Replace `tseslint.configs.recommended` to `tseslint.configs.recommendedTypeChecked` or `tseslint.configs.strictTypeChecked`
- Optionally add `...tseslint.configs.stylisticTypeChecked`
- Install [eslint-plugin-react](https://github.com/jsx-eslint/eslint-plugin-react) and update the config:

```js
// eslint.config.js
import react from 'eslint-plugin-react'

export default tseslint.config({
  // Set the react version
  settings: { react: { version: '18.3' } },
  plugins: {
    // Add the react plugin
    react,
  },
  rules: {
    // other rules...
    // Enable its recommended rules
    ...react.configs.recommended.rules,
    ...react.configs['jsx-runtime'].rules,
  },
})
```
